{% load crispy_forms_filters %}
{% load static %}
{% load widget_tweaks %}
{% load crispy_forms_tags %}
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">

  <title>{{ name | default:"Регистрация" }}</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="{% static 'plugins/fontawesome-free/css/all.min.css' %}">
  <link rel="stylesheet" href="{% static 'plugins/toastr/toastr.min.css' %}">
  <!-- Ionicons -->
  <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
  <!-- overlayScrollbars -->
  <link rel="stylesheet" href="{% static 'plugins/overlayScrollbars/css/OverlayScrollbars.min.css' %}">
  <!-- Theme style -->
  <link rel="stylesheet" href="{% static 'dist/css/adminlte.min.css' %}">
    <!-- Select2 -->
  <link rel="stylesheet" href="{% static 'plugins/select2/css/select2.min.css' %}">


</head>

<body class="hold-transition login-page" style="align-items: normal">
  <div class="wrapper">
      <div class="container">
         <div class="col-md-12 pt-5">
                <div class="card card-outline card-primary">
                  <div class="card-header text-center">
                      <a href="/" class="h1" style="font-size: 1.5rem">
                        Регистрация нового студента
                      </a>
                  </div>
                    {% if form.errors %}
                    <p style="color: red">Ваши данные не совпадают. Пожалуйста, попробуйте ещё раз.</p>
                    {% endif %}

                    {% if next %}
                    {% if user.is_authenticated %}
                    <p style="color: red">Ваш аккаунт не имеет доступ к данной странице.</p>
                    {% else %}
                    <p>Пожалуйста заполните поля</p>
                    {% endif %}
                    {% endif %}
                  <form method="post" id="regform">
                  {% csrf_token %}
                      <div class="card card-blue m-0">
                        <div class="card-header">
                            <p class="m-0" style="text-align: center"><i class="fa fa-user-edit"></i> Персональные данные</p>
                        </div>
                          <div class="card-body">
                            <div class="row">
                                <div class="col-lg-3">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.lastname.auto_id }}">
                                            {{ form.lastname.label }}
                                            {% for error in form.lastname.errors %}
                                              <small id="{{ form.lastname.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.lastname | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                                <div class="col-lg-3">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.firstname.auto_id }}">
                                            {{ form.firstname.label }}
                                            {% for error in form.firstname.errors %}
                                              <small id="{{ form.firstname.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.firstname | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                                <div class="col-lg-3">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.fathersname.auto_id }}">
                                            {{ form.fathersname.label }}
                                            {% for error in form.fathersname.errors %}
                                              <small id="{{ form.fathersname.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.fathersname | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                                <div class="col-lg-3">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.date_of_birth.auto_id }}">
                                            {{ form.date_of_birth.label }}
                                            {% for error in form.date_of_birth.errors %}
                                              <small id="{{ form.date_of_birth.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.date_of_birth | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-3">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.gender.auto_id }}">
                                            {{ form.gender.label }}
                                            {% for error in form.gender.errors %}
                                              <small id="{{ form.gender.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.gender | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                                <div class="col-lg-3">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.email.auto_id }}">
                                            {{ form.email.label }}
                                            {% for error in form.email.errors %}
                                              <small id="{{ form.email.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.email | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                                <div class="col-lg-3">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.password1.auto_id }}">
                                            {{ form.password1.label }}
                                            {% for error in form.password1.errors %}
                                              <small id="{{ form.password1.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.password1 | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                                <div class="col-lg-3">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.password2.auto_id }}">
                                            {{ form.password2.label }}
                                            {% for error in form.password2.errors %}
                                              <small id="{{ form.password2.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.password2 | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                            </div>
                          </div>
                      </div>
                      <div class="card card-blue m-0">
                        <div class="card-header">
                            <p class="m-0" style="text-align: center"><i class="fa fa-graduation-cap"></i> Данные о предыдущем образовании</p>
                        </div>
                          <div class="card-body">
                            <div class="row" id="edu">
                                <div class="col-lg-12">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="last_edu_type">Какой у вас уровень образования?</label>
                                        <select id="last_edu_type" name="last_edu" onchange="showElement()" required class="form-control form-control-sm">
                                            <option value="0"></option>
                                            <option value="1">Высшее (ВУЗ)</option>
                                            <option value="2">Профессиональный лицей</option>
                                            <option value="3">Средне-специальное (СПУЗ/Колледж)</option>
                                            <option value="4">Среднее (Школа)</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.edu_organisation.auto_id }}">
                                            {{ form.edu_organisation.label }}
                                            {% for error in form.edu_organisation.errors %}
                                              <small id="{{ form.edu_organisation.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.edu_organisation | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                                <hr>
                            </div>
                          </div>
                      </div>
                      <div class="card card-blue m-0">
                        <div class="card-header">
                             <p class="m-0" style="text-align: center;"><i class="fa fa-graduation-cap"></i> Данные о новом месте образования</p>
                        </div>
                          <div class="card-body">
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.type_of_applying.auto_id }}">
                                            {{ form.type_of_applying.label }}
                                            {% for error in form.type_of_applying.errors %}
                                              <small id="{{ form.type_of_applying.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.type_of_applying | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.education_country.auto_id }}">
                                            {{ form.education_country.label }}
                                            {% for error in form.education_country.errors %}
                                              <small id="{{ form.education_country.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.education_country | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.university_name.auto_id }}">
                                            {{ form.university_name.label }}
                                            {% for error in form.university_name.errors %}
                                              <small id="{{ form.university_name.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.university_name | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.year_of_applying.auto_id }}">
                                            {{ form.year_of_applying.label }}
                                            {% for error in form.year_of_applying.errors %}
                                              <small id="{{ form.year_of_applying.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.year_of_applying | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.education_period_years.auto_id }}">
                                            {{ form.education_period_years.label }}
                                            {% for error in form.education_period_years.errors %}
                                              <small id="{{ form.education_period_years.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.education_period_years | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                     <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.education_program.auto_id }}">
                                            {{ form.education_program.label }}
                                            {% for error in form.education_program.errors %}
                                              <small id="{{ form.education_program.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.education_program | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.speciality.auto_id }}">
                                            {{ form.speciality.label }}
                                            {% for error in form.speciality.errors %}
                                              <small id="{{ form.speciality.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.speciality | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.education_form.auto_id }}">
                                            {{ form.education_form.label }}
                                            {% for error in form.education_form.errors %}
                                              <small id="{{ form.education_form.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.education_form | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.status.auto_id }}">
                                            {{ form.status.label }}
                                            {% for error in form.status.errors %}
                                              <small id="{{ form.status.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.status | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                            </div>
                          </div>
                      </div>
                      <div class="card card-blue m-0">
                        <div class="card-header">
                            <p class="m-0" style="text-align: center"><i class="fa fa-address-book"></i> Контактные данные и данные о родственниках</p>
                        </div>
                          <div class="card-body">
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.phone_number.auto_id }}">
                                            {{ form.phone_number.label }}
                                            {% for error in form.phone_number.errors %}
                                              <small id="{{ form.phone_number.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.phone_number | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                                <hr>
                            </div>
                            <div class="row">
                                <div class="col-lg-2">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.p_lastname.auto_id }}">
                                            {{ form.p_lastname.label }}
                                            {% for error in form.p_lastname.errors %}
                                              <small id="{{ form.p_lastname.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.p_lastname | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                                <div class="col-lg-2">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.p_firstname.auto_id }}">
                                            {{ form.p_firstname.label }}
                                            {% for error in form.p_firstname.errors %}
                                              <small id="{{ form.p_firstname.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.p_firstname | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                                <div class="col-lg-2">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.p_fathersname.auto_id }}">
                                            {{ form.p_fathersname.label }}
                                            {% for error in form.p_fathersname.errors %}
                                              <small id="{{ form.p_fathersname.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.p_fathersname | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                                <div class="col-lg-3">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.p_phone_number.auto_id }}">
                                            {{ form.p_phone_number.label }}
                                            {% for error in form.p_phone_number.errors %}
                                              <small id="{{ form.p_phone_number.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.p_phone_number | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                                <div class="col-lg-3">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.p_parent_type.auto_id }}">
                                            {{ form.p_parent_type.label }}
                                            {% for error in form.p_parent_type.errors %}
                                              <small id="{{ form.p_parent_type.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.p_parent_type | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-2">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.p2_lastname.auto_id }}">
                                            {{ form.p2_lastname.label }}
                                            {% for error in form.p2_lastname.errors %}
                                              <small id="{{ form.p2_lastname.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.p2_lastname | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                                <div class="col-lg-2">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.p2_firstname.auto_id }}">
                                            {{ form.p2_firstname.label }}
                                            {% for error in form.p2_firstname.errors %}
                                              <small id="{{ form.p2_firstname.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.p2_firstname | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                                <div class="col-lg-2">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.p2_fathersname.auto_id }}">
                                            {{ form.p2_fathersname.label }}
                                            {% for error in form.p2_fathersname.errors %}
                                              <small id="{{ form.p2_fathersname.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.p2_fathersname | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                                <div class="col-lg-3">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.p2_phone_number.auto_id }}">
                                            {{ form.p2_phone_number.label }}
                                            {% for error in form.p2_phone_number.errors %}
                                              <small id="{{ form.p2_phone_number.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.p2_phone_number | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                                <div class="col-lg-3">
                                    <div class="form-group">
                                        <label class="col-form-label-sm" for="{{ form.p2_parent_type.auto_id }}">
                                            {{ form.p2_parent_type.label }}
                                            {% for error in form.p2_parent_type.errors %}
                                              <small id="{{ form.p2_parent_type.auto_id }}" class="text-danger">{{ error }}</small>
                                            {% endfor %}
                                        </label>
                                        {{ form.p2_parent_type | add_class:"form-control form-control-sm"}}
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <button type="submit" class="btn btn-primary">Регистрация</button>
                            </div>

                          </div>
                      </div>
                  </form>
                <div class="card-footer">
                    Если у вас уже есть аккаунт, пожалуйста выполните <a href="/accounts/login">ВХОД</a> в систему.
                </div>
                </div>

                <!-- /.card -->
              </div>
      </div>
  </div>

  <!-- REQUIRED SCRIPTS -->
  <!-- jQuery -->
  <script src="{% static 'plugins/jquery/jquery.min.js' %}"></script>
  <script src="{% static 'dist/js/jquery.formset.js' %}"> </script>
  <!-- Bootstrap -->
  <script src="{% static 'plugins/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'plugins/toastr/toastr.min.js' %}"></script>
  <!-- overlayScrollbars -->
  <script
    src="{% static 'plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js' %}"></script>
  <!-- BS-Stepper -->
  <script src="{% static 'plugins/bs-stepper/js/bs-stepper.min.js' %}"></script>
  <script src="{% static 'js/jquery.bootstrap.modal.forms.js' %}"></script>

  <!-- Select2 -->
  <script src="{% static 'plugins/select2/js/select2.full.min.js' %}"></script>
  <!-- jquery-validation -->
  <script src="{% static 'plugins/jquery-validation/jquery.validate.min.js' %}"></script>
  <script src="{% static 'plugins/jquery-validation/additional-methods.min.js' %}"></script>
  <!-- AdminLTE App -->
  <script src="{% static 'dist/js/adminlte.js' %}"></script>

  <!-- OPTIONAL SCRIPTS -->
  <script src="{% static 'dist/js/demo.js' %}"></script>

  {% if messages %}
  {% for message in messages %}
  <script type=text/javascript>
    toastr.options.progressBar = true;
    toastr.{{ message.tags }}('{{ message }}')
  </script>
  {% endfor %}
  {% endif %}

  <script>
    (function ($) {
      $('.clickable-row').css('cursor', 'pointer');
      $(".clickable-row").click(function () {
        window.location = $(this).data("href");
      });
    })(jQuery)

    $(function () {
      $.validator.setDefaults({

      });
      $('#regform').validate({
        rules: {
          lastname: {
            required: true
          },
          firstname: {
            required: true
          },
          date_of_birth: {
            required: true
          },
          gender: {
            required: true
          },
          email: {
            required: true,
            email: true
          },
          password1: {
            required: true
          },
          password2: {
            required: true
          },
          last_edu: {
            required: true
          },
          university: {
            required: true
          },
          college: {
            required: true
          },
          school: {
            required: true
          }
        },
        messages: {
          lastname: {
            required: "Это поле обязательное для заполнения"
          },
          firstname: {
            required: "Это поле обязательное для заполнения"
          },
          date_of_birth: {
            required: "Это поле обязательное для заполнения"
          },
          gender: {
            required: "Это поле обязательное для заполнения"
          },
          email: {
            required: "Это поле обязательное для заполнения",
            email: "Неправильный формат e-mail"
          },
          password1: {
            required: "Это поле обязательное для заполнения"
          },
          password2: {
            required: "Это поле обязательное для заполнения"
          },
          last_edu: {
            required: "Это поле обязательное для заполнения"
          },
          university: {
            required: "Это поле обязательное для заполнения"
          },
          college: {
            required: "Это поле обязательное для заполнения"
          },
          school: {
            required: "Это поле обязательное для заполнения"
          },
          type_of_applying: {
            required: "Это поле обязательное для заполнения"
          },
          education_country: {
            required: "Это поле обязательное для заполнения"
          },
          university_name: {
            required: "Это поле обязательное для заполнения"
          },
          year_of_applying: {
            required: "Это поле обязательное для заполнения"
          },
          education_period_years: {
            required: "Это поле обязательное для заполнения"
          },
          education_program: {
            required: "Это поле обязательное для заполнения"
          },
          speciality: {
            required: "Это поле обязательное для заполнения"
          },
          education_form: {
            required: "Это поле обязательное для заполнения"
          },
          status: {
            required: "Это поле обязательное для заполнения"
          }
        },
        errorElement: 'span',
        errorPlacement: function (error, element) {
          error.addClass('invalid-feedback');
          element.closest('.form-group').append(error);
        },
        highlight: function (element, errorClass, validClass) {
          $(element).addClass('is-invalid');
        },
        unhighlight: function (element, errorClass, validClass) {
          $(element).removeClass('is-invalid');
        }
      });
    });

    function showElement() {
     document.getElementById("last_edu_type").disabled = "disabled";
     let valueselected = document.getElementById("last_edu_type").value;

        if(valueselected == 1){

        } else if(valueselected == 2){

        } else {

        }
    }

  </script>

  {% block morejs %}

  {% endblock morejs %}
</body>
</html>
